@echo off
chcp 65001 >nul
title ZP System 3.0

echo ========================================
echo    ??????? ??????? ?? ?????????? 3.0
echo ========================================
echo.

echo [%date% %time%] ?????? ???????... > system.log
echo [%date% %time%] ???????? Python... >> system.log

python --version >nul 2>&1
if errorlevel 1 (
    echo ? ??????: Python ?? ?????????? >> system.log
    echo ? ??????: Python ?? ??????????
    pause
    exit /b 1
)

echo [%date% %time%] Python ????????? >> system.log
echo [%date% %time%] ???????? ?????????... >> system.log

echo ????????? ??????????? ?????????...
pip install flask >nul 2>&1
echo [%date% %time%] ?????????? ????????? >> system.log

echo.
echo ========================================
echo    ?????? ???????????...
echo ========================================
echo [%date% %time%] ?????? ???????... >> system.log
echo ??????? ???????? ?? ??????: http://localhost:5000
echo ???? ??????????? ?: system.log
echo.

start http://localhost:5000

echo [%date% %time%] ?????? ??????????... >> system.log
python app.py

if errorlevel 1 (
    echo [%date% %time%] ?????? ?????????? >> system.log
) else (
    echo [%date% %time%] ?????????? ????????? >> system.log
)
